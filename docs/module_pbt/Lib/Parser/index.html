<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Parser (module_pbt.Lib.Parser)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">module_pbt</a> &#x00BB; <a href="../index.html">Lib</a> &#x00BB; Parser</nav><header class="odoc-preamble"><h1>Module <code><span>Lib.Parser</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#boolean-predicates-on-characters">Boolean predicates on characters</a></li><li><a href="#simple-parsers">Simple parsers</a></li><li><a href="#functions-for-running-parsers">Functions for running parsers</a></li></ul></nav><div class="odoc-content"><p>Parser utility functions, based on the <a href="https://github.com/inhabitedtype/angstrom">Angstrom</a> parser-combinator library.</p><p>The implementation of some parsers is adapted from the <a href="https://www.seas.upenn.edu/~cis5520/22fa/lectures/stub/10-parsers/Parsers.html">Parsers lecture</a> of Penn's CIS 5520 Haskell course.</p><div class="odoc-spec"><div class="spec module" id="module-A" class="anchored"><a href="#module-A" class="anchor"></a><code><span><span class="keyword">module</span> A</span><span> = <span class="xref-unresolved">Angstrom</span></span></code></div><div class="spec-doc"><p>Alias for the <code>Angstrom</code> module</p></div></div><h2 id="boolean-predicates-on-characters"><a href="#boolean-predicates-on-characters" class="anchor"></a>Boolean predicates on characters</h2><div class="odoc-spec"><div class="spec value" id="val-is_digit" class="anchored"><a href="#val-is_digit" class="anchor"></a><code><span><span class="keyword">val</span> is_digit : <span><span class="xref-unresolved">Base</span>.char <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>is_digit c</code> returns true if <code>c</code> is a digit, false otherwise</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_uppercase" class="anchored"><a href="#val-is_uppercase" class="anchor"></a><code><span><span class="keyword">val</span> is_uppercase : <span><span class="xref-unresolved">Base</span>.char <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>is_uppercase c</code> returns true if <code>c</code> is a capital letter, false otherwise</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_lowercase" class="anchored"><a href="#val-is_lowercase" class="anchor"></a><code><span><span class="keyword">val</span> is_lowercase : <span><span class="xref-unresolved">Base</span>.char <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>is_lowercase c</code> returns true if <code>c</code> is a lowercase letter, false otherwise</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_letter" class="anchored"><a href="#val-is_letter" class="anchor"></a><code><span><span class="keyword">val</span> is_letter : <span><span class="xref-unresolved">Base</span>.char <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>is_letter c</code> returns true if <code>c</code> is a letter, false otherwise</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_whitespace" class="anchored"><a href="#val-is_whitespace" class="anchor"></a><code><span><span class="keyword">val</span> is_whitespace : <span><span class="xref-unresolved">Base</span>.char <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>is_whitespace c</code> returns true if <code>c</code> is a whitespace character, i.e. tab/newline/space/carriage return</p></div></div><h2 id="simple-parsers"><a href="#simple-parsers" class="anchor"></a>Simple parsers</h2><div class="odoc-spec"><div class="spec value" id="val-lowercaseP" class="anchored"><a href="#val-lowercaseP" class="anchor"></a><code><span><span class="keyword">val</span> lowercaseP : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a lowercase letter</p></div></div><div class="odoc-spec"><div class="spec value" id="val-upperCaseP" class="anchored"><a href="#val-upperCaseP" class="anchor"></a><code><span><span class="keyword">val</span> upperCaseP : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a capital letter</p></div></div><div class="odoc-spec"><div class="spec value" id="val-letterP" class="anchored"><a href="#val-letterP" class="anchor"></a><code><span><span class="keyword">val</span> letterP : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a single letter</p></div></div><div class="odoc-spec"><div class="spec value" id="val-digitP" class="anchored"><a href="#val-digitP" class="anchor"></a><code><span><span class="keyword">val</span> digitP : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a single digit</p></div></div><div class="odoc-spec"><div class="spec value" id="val-underscoreP" class="anchored"><a href="#val-underscoreP" class="anchor"></a><code><span><span class="keyword">val</span> underscoreP : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a single underscore character</p></div></div><div class="odoc-spec"><div class="spec value" id="val-quoteP" class="anchored"><a href="#val-quoteP" class="anchor"></a><code><span><span class="keyword">val</span> quoteP : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a single quote character</p></div></div><div class="odoc-spec"><div class="spec value" id="val-intP" class="anchored"><a href="#val-intP" class="anchor"></a><code><span><span class="keyword">val</span> intP : <span><span class="xref-unresolved">Base</span>.int <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for integers</p></div></div><div class="odoc-spec"><div class="spec value" id="val-whitespace" class="anchored"><a href="#val-whitespace" class="anchor"></a><code><span><span class="keyword">val</span> whitespace : <span><span class="xref-unresolved">Base</span>.char <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Parser for a whitespace character</p></div></div><div class="odoc-spec"><div class="spec value" id="val-wsP" class="anchored"><a href="#val-wsP" class="anchor"></a><code><span><span class="keyword">val</span> wsP : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Takes a parser <code>p</code>, runs it &amp; skips over any whitespace chars occurring afterwards</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stringP" class="anchored"><a href="#val-stringP" class="anchor"></a><code><span><span class="keyword">val</span> stringP : <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.unit <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Accepts only a particular string <code>str</code> &amp; consumes any white space that follows</p></div></div><div class="odoc-spec"><div class="spec value" id="val-constP" class="anchored"><a href="#val-constP" class="anchor"></a><code><span><span class="keyword">val</span> constP : <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p>Accepts a particular string s, returns a given value x, and consume any white space that follows</p></div></div><div class="odoc-spec"><div class="spec value" id="val-between" class="anchored"><a href="#val-between" class="anchor"></a><code><span><span class="keyword">val</span> between : <span><span><span class="type-var">'b</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p><code>between openP p closeP</code> parses <code>openP</code>, followed by <code>p</code> and finally <code>closeP</code>. Only the value parsed by <code>p</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-parens" class="anchored"><a href="#val-parens" class="anchor"></a><code><span><span class="keyword">val</span> parens : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p><code>parens p</code> takes a parser <code>p</code> and parses it between parentheses</p></div></div><div class="odoc-spec"><div class="spec value" id="val-chainl1" class="anchored"><a href="#val-chainl1" class="anchor"></a><code><span><span class="keyword">val</span> chainl1 : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span></span></code></div><div class="spec-doc"><p><code>chainl1 e op</code> parses one or more occurrences of <code>e</code>, separated by <code>op</code>, &amp; returns a left-associative application of the functions returned by the <code>op</code> parser onto the values retruned by the <code>e</code> parser.</p><p>(Implementation of <code>chainl1</code> taken from the <a href="https://github.com/inhabitedtype/angstrom">Angstrom docs</a>)</p></div></div><h2 id="functions-for-running-parsers"><a href="#functions-for-running-parsers" class="anchor"></a>Functions for running parsers</h2><div class="odoc-spec"><div class="spec value" id="val-run_parser" class="anchored"><a href="#val-run_parser" class="anchor"></a><code><span><span class="keyword">val</span> run_parser : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">A</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Base</span>.string )</span> <span class="xref-unresolved">Base</span>.Result.t</span></span></code></div><div class="spec-doc"><p><code>run_parser p s</code> uses the parser <code>p</code> to parse the string <code>s</code></p></div></div></div></body></html>